print len(list(filter(lambda x: x, [(lambda f:(lambda x: f(lambda v: x(x)(v)))(lambda x: f(lambda v: x(x)(v))))(lambda f: (lambda i: any([edge[1] == 'shiny gold' or (f((i[0], edge[1]))) for edge in i[0][i[1]]])))(i) for i in (lambda d: [(d, key) for key in d.keys()])(dict([(' '.join(line.split(' ')[0:2]), [] if 'no other bags' in line else list(map(lambda x: (x.split(' ')[0], ' '.join(x.split(' ')[1:3])), line.split('contain ')[1].split(', '))))for line in open('7.txt')]))])))
