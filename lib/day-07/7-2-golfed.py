print [(lambda f:(lambda x: f(lambda v: x(x)(v)))(lambda x: f(lambda v: x(x)(v))))(lambda f:(lambda i: 1 + sum([int(edge[0]) * f((i[0], edge[1])) for edge in i[0][i[1]]])))((dict([(' '.join(line.split(' ')[0:2]), [] if 'no other bags' in line else list(map(lambda x: (x.split(' ')[0], ' '.join(x.split(' ')[1:3])), line.split('contain ')[1].split(', '))))for line in open('7.txt')]), 'shiny gold'))][0]-1
